version: "3.2"

services:
  transmission:
    image: lscr.io/linuxserver/transmission
    container_name: transmission
    restart: unless-stopped
    environment:
      - PUID=${PUID?error}
      - PGID=${PGID?error}
      - USER=transmission
      - PASS=transmission
    ports:
      - "51413:51413/tcp"
      - "51413:51413/udp"
      - "9091:9091"
    volumes:
      - "transmission:/config"
      - "downloads:/downloads"
    deploy:
      mode: replicated
      replicas: 1

volumes:
  transmission:
    driver_opts:
      type: "nfs"
      o: "addr=10.10.10.51,nfsvers=4"
      device: ":/media/nfs/transmission"

  downloads:
    driver_opts:
      type: "nfs"
      o: "addr=10.10.10.51,nfsvers=4"
      device: ":/media/nfs/downloads"
